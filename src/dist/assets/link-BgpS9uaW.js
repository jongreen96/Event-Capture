import{r as s,w as le,x as ie,y as K,z as ce,A as ue,B as de,C as U,D as fe,E as q,F as he}from"./index-D7-Gwp72.js";import{r as pe}from"./utils-DPK1_h-q.js";const me="Error preloading route! ☝️";function ve(o,v){const a=le(),[u,y]=s.useState(!1),m=s.useRef(!1),l=ie(v),{activeProps:T=()=>({className:"active"}),inactiveProps:O=()=>({}),activeOptions:n,to:g,preload:C,preloadDelay:j,hashScrollIntoView:V,replace:W,startTransition:$,resetScroll:G,viewTransition:J,children:M,target:f,disabled:r,style:P,className:b,onClick:S,onFocus:k,onMouseEnter:x,onMouseLeave:E,onTouchStart:_,ignoreBlocker:Q,...X}=o,{params:Te,search:ge,hash:Pe,state:be,mask:Se,reloadDocument:ke,...F}=X,I=s.useMemo(()=>{try{return new URL(`${g}`),"external"}catch{}return"internal"},[g]),Y=K({select:e=>e.location.search,structuralSharing:!0}),N=ce({select:e=>{var t;return o.from??((t=e[e.length-1])==null?void 0:t.fullPath)}}),i=s.useMemo(()=>({...o,from:N}),[o,N]),c=s.useMemo(()=>a.buildLocation(i),[a,i,Y]),h=s.useMemo(()=>i.reloadDocument?!1:C??a.options.defaultPreload,[a.options.defaultPreload,C,i.reloadDocument]),Z=j??a.options.defaultPreloadDelay??0,D=K({select:e=>{if(n!=null&&n.exact){if(!fe(e.location.pathname,c.pathname,a.basepath))return!1}else{const t=q(e.location.pathname,a.basepath).split("/");if(!q(c.pathname,a.basepath).split("/").every((ne,se)=>ne===t[se]))return!1}return((n==null?void 0:n.includeSearch)??!0)&&!he(e.location.search,c.search,{partial:!(n!=null&&n.exact),ignoreUndefined:!(n!=null&&n.explicitUndefined)})?!1:n!=null&&n.includeHash?e.location.hash===c.hash:!0}}),d=s.useCallback(()=>{a.preloadRoute(i).catch(e=>{console.warn(e),console.warn(me)})},[i,a]),ee=s.useCallback(e=>{e!=null&&e.isIntersecting&&d()},[d]);if(ue(l,ee,{rootMargin:"100px"},{disabled:!!r||h!=="viewport"}),de(()=>{m.current||!r&&h==="render"&&(d(),m.current=!0)},[r,d,h]),I==="external")return{...F,ref:l,type:I,href:g,...M&&{children:M},...f&&{target:f},...r&&{disabled:r},...P&&{style:P},...b&&{className:b},...S&&{onClick:S},...k&&{onFocus:k},...x&&{onMouseEnter:x},...E&&{onMouseLeave:E},..._&&{onTouchStart:_}};const te=e=>{if(!r&&!ye(e)&&!e.defaultPrevented&&(!f||f==="_self")&&e.button===0){e.preventDefault(),pe.flushSync(()=>{y(!0)});const t=a.subscribe("onResolved",()=>{t(),y(!1)});return a.navigate({...i,replace:W,resetScroll:G,hashScrollIntoView:V,startTransition:$,viewTransition:J,ignoreBlocker:Q})}},z=e=>{r||h&&d()},ae=z,re=e=>{if(r)return;const t=e.target||{};if(h){if(t.preloadTimeout)return;t.preloadTimeout=setTimeout(()=>{t.preloadTimeout=null,d()},Z)}},oe=e=>{if(r)return;const t=e.target||{};t.preloadTimeout&&(clearTimeout(t.preloadTimeout),t.preloadTimeout=null)},p=e=>t=>{var w;(w=t.persist)==null||w.call(t),e.filter(Boolean).forEach(H=>{t.defaultPrevented||H(t)})},L=D?U(T,{})??{}:{},R=D?{}:U(O,{}),A=[b,L.className,R.className].filter(Boolean).join(" "),B={...P,...L.style,...R.style};return{...F,...L,...R,href:r?void 0:c.maskedLocation?a.history.createHref(c.maskedLocation.href):a.history.createHref(c.href),ref:l,onClick:p([S,te]),onFocus:p([k,z]),onMouseEnter:p([x,re]),onMouseLeave:p([E,oe]),onTouchStart:p([_,ae]),disabled:!!r,target:f,...Object.keys(B).length&&{style:B},...A&&{className:A},...r&&{role:"link","aria-disabled":!0},...D&&{"data-status":"active","aria-current":"page"},...u&&{"data-transitioning":"transitioning"}}}const _e=s.forwardRef((o,v)=>{const{_asChild:a,...u}=o,{type:y,ref:m,...l}=ve(u,v),T=typeof u.children=="function"?u.children({isActive:l["data-status"]==="active"}):u.children;return typeof a>"u"&&delete l.disabled,s.createElement(a||"a",{...l,ref:m},T)});function ye(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}export{_e as L};
